# RPG Battle Simulator

Симулятор пошаговых боёв в стиле RPG с управляемыми ИИ бойцами, настраиваемыми правилами, персонажами, монстрами и навыками.

**Основные возможности:**

-   Несколько классов персонажей (маг, воин, разбойник) с уникальным поведением ИИ
-   Гибкая система конфигурации через YAML-файлы
-   Поддержка навыков, экипировки, роста персонажей и призывов
-   Модульная архитектура: легко добавлять новые классы, правила и монстров
-   Набор автоматических тестов для проверки баланса и ключевых сценариев
-   Магазин с экипировкой и зельями

## Описание файлов

### Корневые скрипты

-   **info_dir.py** — утилита для вывода структуры директорий и файлов проекта
-   **main.py** — точка входа: парсит аргументы и запускает симуляцию боёв
-   **stats.txt** — файл примера результатов тестового прогона

### Директория `src`

-   **src/config/** — набор YAML-файлов для настройки: ИИ, правил боя, персонажей, монстров, навыков, экипировки, роста и призывов
-   **src/my_game/base/combatant.py** — базовый класс для всех бойцов
-   **src/my_game/battle/** — модули логики битвы:

    -   `ai/` — реализации ИИ для разных классов (mage_ai.py, rogue_ai.py, warrior_ai.py)
    -   `damage.py`, `defense.py`, `dispatcher.py`, `enums.py`, `skill_executor.py`, `status.py`

-   **src/my_game/characters/** — классы персонажей: базовые и игрокоманаги
-   **src/my_game/monsters/** — классы монстров и их типы
-   **src/my_game/config.py** — загрузка и парсинг конфигураций
-   **src/my_game/utils/** — утилиты для CLI и генерации монстров

### Тесты

-   **src/test/test_warrior_vs_bosses.py** — тест сценария: воин против боссов

## Магазин и предметы

В игре реализована система магазина. Список экипировки и зелий описан в
`src/config/gear.yaml`. Для каждого предмета можно указать слот (голова, грудь,
руки и т.д.), класс героев, качество и базовые характеристики. В зависимости от
качества предмет получает случайные доп. бонусы из указанного набора. Магазин
предоставляет:

-   экипировку, которую можно надевать на героев;
-   зелья лечения и восстановления маны разной силы.

Игроки покупают предметы за золото, которое зарабатывается в боях. Купленные
вещи помещаются в инвентарь игрока.

## Telegram Bot

В директории `tg_bot` находится минимальный бот на `aiogram 3`. Он использует
`aiosqlite` и репозитории для сохранения данных пользователей, персонажей и
инвентаря. Для запуска потребуется переменная окружения `BOT_TOKEN` и
установленные зависимости из `requirements.txt`. Соединение с SQLite
открывается через асинхронный контекстный менеджер `Database`.

`python -m tg_bot.main`
